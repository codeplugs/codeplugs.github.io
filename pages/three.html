<div class="container">
  <div class="mt-5 row mb-4">
    <div class="col-lg-8 mx-auto text-center">
      <h1 class="display-4 title-login">Rgdrive</h1>
      <p class="lead mb-0 title-desc">Online remote upload to google drive</p>
      <p class="lead title-desc">
        Powered by <a href="https://facebook.com/codeplugs/">Codeplug</a>
      </p>
    </div>
  </div>

  <div class="card mx-auto mt-5 mb-5">
    <div class="card-header bg-primary card-header-color">Form</div>
    <div class="card-body bg-light">
      <form id="jaxloads" onsubmit="return false;">
        <div class="form-group">
          <div class="form-row">
            <div class="col-md-12">
              <label for="yt_url">Remote URL</label>
              <input class="form-control" id="yt_url" type="text" name="url" />
            </div>
          </div>
        </div>

        <button id="submitBtn" type="button" class="btn btn-primary btn-block">
          Submit
        </button>

        <div class="mt-3 card border-secondary">
          <div class="card-body">
            <h5 class="card-title">
              Response<span id="resp" class="float-right"></span>
            </h5>
            <div class="col-xs-10">
              <textarea
                id="log_result"
                class="form-control input-sm"
                rows="5"
                style="resize: none"
                readonly
              ></textarea>
            </div>
            <div id="download_container" class="text-center mt-2"></div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("jaxloads");
  const submitBtn = document.getElementById("submitBtn");
  const resultBox = document.getElementById("log_result");
  const respStatus = document.getElementById("resp");
  const downloadContainer = document.getElementById("download_container");

  const PARENT_ID = "YOUR_FOLDER_ID_HERE";

  submitBtn.addEventListener("click", async function () {
    respStatus.textContent = "‚è≥ Processing...";
    resultBox.value = "";
    downloadContainer.innerHTML = "";

    const url = document.getElementById("yt_url").value;
    if (!url) {
      respStatus.textContent = "‚ö†Ô∏è URL kosong!";
      return;
    }

    try {
      const apiUrl =
        "http://azharjdsjeo.rf.gd/upload.php?url=" +
        encodeURIComponent(url) +
        "&parent=" +
        encodeURIComponent(PARENT_ID);

      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error("Server error: " + response.status);

      const text = await response.text();

      // tampilkan response text langsung
      resultBox.value = text;
      respStatus.textContent = "‚úÖ Success";

      // kalau response ada "http" (link balik)
      if (text.includes("http")) {
        downloadContainer.innerHTML = `
          <a href="${text.trim()}" target="_blank" class="btn btn-success">
            üì• Download File
          </a>`;
      }
    } catch (err) {
      respStatus.textContent = "‚ùå Failed";
      resultBox.value = err.message;
    }
  });
});
</script>
